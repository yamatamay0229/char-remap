<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>人物相関図</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="toolbar">
    <div class="left"><strong>人物相関図</strong></div>
    <div class="right">
      <button id="btn-add-person">人物を追加</button>
      <button id="btn-add-relation">関係を追加</button>
      <button id="btn-delete" class="danger">選択を削除</button>
      <span class="muted">｜</span>
      <button id="btn-random">ランダム配置</button>
      <button id="btn-circle">円形配置</button>
      <button id="btn-center">選択中心配置</button>
      <label class="snap"><input type="checkbox" id="chk-snap" checked> グリッドスナップ</label>
    </div>
  </header>

  <main id="graph"></main>

  <!-- 人物追加 -->
  <dialog id="dlg-person">
    <div class="modal">
      <header>人物を追加</header>
      <form id="form-person" method="dialog">
        <div class="row">
          <label for="p-id">ID（英数字）</label>
          <input id="p-id" name="id" type="text" placeholder="altina" required>
        </div>
        <div class="row">
          <label for="p-name">名前</label>
          <input id="p-name" name="name" type="text" placeholder="アルティナ" required>
        </div>
        <div class="row">
          <label for="p-image">画像URL（任意）</label>
          <input id="p-image" name="image" type="text" placeholder="./images/altina.png">
        </div>
        <div class="actions">
          <button type="button" id="p-cancel" class="btn">キャンセル</button>
          <button type="submit" class="btn">追加</button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- 関係追加 -->
  <dialog id="dlg-relation">
    <div class="modal">
      <header>関係を追加</header>
      <form id="form-relation" method="dialog">
        <div class="row">
          <label for="r-from">From（誰から）</label>
          <select id="r-from" name="from" required></select>
        </div>
        <div class="row">
          <label for="r-to">To（誰へ）</label>
          <select id="r-to" name="to" required></select>
        </div>
        <div class="row">
          <label for="r-label">関係名</label>
          <input id="r-label" name="label" type="text" placeholder="保護 / 信頼" required>
        </div>
        <div class="row">
          <label for="r-strength">強さ（1-5）</label>
          <input id="r-strength" name="strength" type="number" min="1" max="5" value="3" required>
        </div>
        <div class="row">
          <label for="r-type">種別</label>
          <input id="r-type" name="type" type="text" placeholder="感情 / 家族 / 敵対">
        </div>
        <div class="row">
          <label for="r-mutual">相互</label>
          <select id="r-mutual" name="mutual">
            <option value="false" selected>いいえ</option>
            <option value="true">はい</option>
          </select>
        </div>
        <div class="actions">
          <button type="button" id="r-cancel" class="btn">キャンセル</button>
          <button type="submit" class="btn">追加</button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- Cytoscape -->
  <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
  <!-- アプリ本体 -->
  <script type="module" src="./js/main.js"></script>
</body>
</html>
